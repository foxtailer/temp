{% extends "main/base.html" %}
{% load static %}

{% block load_jq %}<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>{% endblock  %}

{% block top-menu__items %}
<li class="top-menu__item">
  <a class="top-menu__link" href="{% url "write:index" %}">
    <svg fill="#000000" width="30px" height="30px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M29.024 6.499l-2.467 2.467-3.523-3.523 2.467-2.467c0.973-0.973 2.551-0.973 3.523 0s0.973 2.55 0 3.523zM27.614 9.317c0.195-0.194 0.511-0.194 0.705 0 0.195 0.195 0.195 0.511 0 0.705l-9.16 9.161c-0.195 0.194-0.511 0.194-0.705 0s-0.194-0.51 0-0.704l5.99-5.99-4.934-4.934 2.114-2.113 4.933 4.933 1.057-1.058zM19.511 8.966l3.523 3.523-14.094 14.094-3.523-3.523 14.094-14.094zM2.246 29.754l2.466-5.989 3.523 3.523-5.989 2.466z">
      </path>
    </svg>
  </a>
</li>

<li>
  <a class="top-menu__link" href="{% url "my:index" %}">
    <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M4 19V6.2C4 5.0799 4 4.51984 4.21799 4.09202C4.40973 3.71569 4.71569 3.40973 5.09202 3.21799C5.51984 3 6.0799 3 7.2 3H16.8C17.9201 3 18.4802 3 18.908 3.21799C19.2843 3.40973 19.5903 3.71569 19.782 4.09202C20 4.51984 20 5.0799 20 6.2V17H6C4.89543 17 4 17.8954 4 19ZM4 19C4 20.1046 4.89543 21 6 21H20M9 7H15M9 11H15M19 17V21"
        stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>
  </a>
</li>

<li>
  <a class="top-menu__link" href="{% url "letters:index" %}">
    <svg fill="#000000" width="30px" height="30px" viewBox="0 -5 32 32" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid">
    <path d="M29.000,22.000 L3.000,22.000 C1.346,22.000 -0.000,20.654 -0.000,19.000 L-0.000,3.000 C-0.000,1.346 1.346,-0.000 3.000,-0.000 L29.000,-0.000 C30.654,-0.000 32.000,1.346 32.000,3.000 L32.000,19.000 C32.000,20.654 30.654,22.000 29.000,22.000 ZM3.000,20.000 L29.000,20.000 C29.551,20.000 30.000,19.552 30.000,19.000 L30.000,3.317 L16.651,14.759 C16.463,14.920 16.232,15.000 16.000,15.000 C15.768,15.000 15.537,14.920 15.349,14.759 L2.000,3.317 L2.000,19.000 C2.000,19.552 2.449,20.000 3.000,20.000 ZM28.464,2.000 L3.536,2.000 L16.000,12.683 L28.464,2.000 Z"/>
    </svg>
  </a>
</li>
{% endblock %}

{% block main %}
<div class="wisdom_inner">
  <p class="wisdom" id="wisdom">{{wisdom.text}}</p>
  <button class="wisdom__next" id="new-wisdom-button">
    <svg height="30px" width="30px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 478.448 478.448" xml:space="preserve">
      <g>
        <g>
          <polygon style="fill:#010002;" points="131.659,0 100.494,32.035 313.804,239.232 100.494,446.373 131.65,478.448 377.954,239.232" />
        </g>
      </g>
    </svg>
  </button>
</div>
{% endblock %}

{% block bottom-menu__items %}
<li class="bottom-menu__item">
  <button class="bottom-menu__btn">
    <svg width="30px" height="30px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z"
        stroke="#323232" stroke-width="2" />
      <path d="M12 8L12 13" stroke="#323232" stroke-width="2" stroke-linecap="round" />
      <path d="M12 16V15.9888" stroke="#323232" stroke-width="2" stroke-linecap="round" />
    </svg>
  </button>
</li>
<li class="bottom-menu__item">
  <button class="bottom-menu__btn" id="add-wisdom-btn">
    <svg fill="#000000" width="30px" height="30px" viewBox="0 0 1920 1920" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M1585.963 1920 960.48 1544.711 335 1920V170.586C335 76.536 411.536 0 505.586 0h909.79c94.05 0 170.587 76.536 170.587 170.586V1920Z"
        fill-rule="evenodd" />
    </svg>
  </button>
</li>
<li class="bottom-menu__item">
  <a class="bottom-menu__link" href="write.html">
    <svg width="30px" height="30px" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><path fill="#000000" d="M470.7 20L368.2 49.81l41.5-28.09c-26.2 5.92-59.3 17.5-100.9 36.19l-67.9 70.79L265 79.25c-23.3 12.96-48 29.95-71.8 49.85l-15.8 64.3-3.4-47.6c-23.5 21.6-45.6 45.6-63.9 70.9-19.23 26.5-34.26 54.5-41.79 82.4l-28.12-18.8c2.52 23.7 10.31 44.3 23.09 63.2l-33.62-10.3c7.64 23.5 20.13 38.7 41.25 51-11.83 33.3-17.38 68.1-23.34 102.8l18.4 3.1C87.31 277.4 237.9 141.8 374 81.72l6.9 17.38c-121.7 54.5-216.3 146.5-265.8 279.1 18.1.1 35.8-2.1 52.2-6.3l4.9-60.9 13.1 55.5c10.9-4 20.9-8.8 29.8-14.4l-20.7-43.5 32.8 34.8c8-6.4 14.6-13.6 19.6-21.5 30.4-47.5 62.2-94.7 124.8-134.2l-45.7-16.2 70.1 2.1c11.4-5.8 23.4-12.9 32.5-19.6l-49.7-4 74.7-17.6c5.8-5.8 11.2-11.9 16.1-18 17.3-21.94 29-44.78 26.2-65.55-1.3-10.39-7.5-20.16-17.6-25.63-2.5-1.3-5.2-2.45-7.5-3.22z"/></svg>
  </a>
</li>
{% endblock %}

{% block btn_script %}
<script>
  document.getElementById('new-wisdom-button').addEventListener('click', function() {
      fetch("{% url 'explore:get_random_wisdom' %}")
          .then(response => response.json())
          .then(data => {
            console.log(data)  //  CONSOLE! DEL
              document.getElementById('wisdom').innerText = data.wisdom +" "+ data.wisdom_id +" "+ data.wisdom_author;
          })
          .catch(error => console.error('Error:', error));
  });

  $(document).ready(function(){
    $('#add-wisdom-btn').click(function(){
        //const quoteId = $(this).data('quote-id');
        $.ajax({
            type: 'POST',
            url: '{% url "explore:like" %}',
            //'wisdom_id': quoteId,
            //'csrfmiddlewaretoken': '{{ csrf_token }}'
            data: {
              'wisdom_id': 1,
              'csrfmiddlewaretoken': 'gg'
            },
            success: function(response){
                if(response.status === 'liked'){
                    alert('You liked the quote!');
                }
            }
        });
    });
  });
</script>
{% endblock  %}